<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Login - Panel Admin</title>
    <link rel="shortcut icon" href="../Assets/logoNav.jpg" type="image/x-icon" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body
    class="bg-dark text-white d-flex justify-content-center align-items-center vh-100"
  >
    <div class="card bg-secondary p-4" style="width: 300px">
      <h3 class="text-center mb-3">Ingreso Admin</h3>
      <input id="user" class="form-control mb-2" placeholder="Usuario" />
      <input
        id="pass"
        type="password"
        class="form-control mb-3"
        placeholder="ContraseÃ±a"
      />
      <button class="btn btn-dark w-100" id="loginBtn">Ingresar</button>
      <p id="msg" class="text-danger mt-2 text-center"></p>
    </div>

    <script>
      document
        .getElementById("loginBtn")
        .addEventListener("click", async () => {
          const user = document.getElementById("user").value;
          const pass = document.getElementById("pass").value;
          const res = await fetch("http://localhost:4000/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ user, pass }),
          });
          const data = await res.json();
          if (res.ok) {
            localStorage.setItem("token", data.token);
            window.location.href = "admin.html";
          } else {
            document.getElementById("msg").textContent = data.message;
          }
        });
    </script>
  </body>
</html>
